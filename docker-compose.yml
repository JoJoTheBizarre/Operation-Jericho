# Docker Compose configuration for Jericho MCP Server
# Useful for testing the server locally

version: '3.8'

services:
  jericho-mcp-server:
    build: .
    image: jericho-mcp-server:latest
    container_name: jericho-mcp-server
    stdin_open: true  # Keep stdin open for MCP communication
    tty: true        # Allocate a pseudo-TTY
    # The MCP server communicates via stdio, so we need to keep stdio open
    # For actual MCP client integration, the container would be run differently

    # Environment variables
    environment:
      - PYTHONUNBUFFERED=1
      - PYTHONPATH=/app

    # Mount games directory as volume if you want to use external games
    # volumes:
    #   - ./games:/app/games:ro

    # For testing, you can override the entrypoint to get a shell
    # entrypoint: /bin/bash

    # Health check (optional)
    # healthcheck:
    #   test: ["CMD", "python", "-c", "import sys; sys.exit(0)"]
    #   interval: 30s
    #   timeout: 10s
    #   retries: 3

    # Don't expose ports - MCP uses stdio, not network
    # ports: []